<!doctype html><html lang="en"><head><meta charset="utf-8"> <title>CSS Variables Guide: Color Manipulation and Dark Mode - digital authority</title> <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"> <meta name="description" content="Follow this guide, you will: Learn why use HSLa over HEX/RGB for better color manipulation Create dark mode for your app/website with CSS variables (custom properties) in a pleasant way How to migrate from spreading colors all over your stylesheets..."> <meta name="theme-color" content="#a212d1"> <link rel="alternate" href="/feed.xml" type="application/atom+xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" href="/favicon.png" type="image/png"><link rel="icon" href="data:image/svg+xml;utf8,%3Csvg%20width%3D'180'%20height%3D'180'%20viewBox%3D'0%200%20180%20180'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20xmlns%3Axlink%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink'%3E%3Ctitle%3ESparanoid%3C%2Ftitle%3E%3Cdefs%3E%3Cpath%20d%3D'M90%20165c41.42%200%2075-33.58%2075-75s-33.58-75-75-75-75%2033.58-75%2075%2033.58%2075%2075%2075zm0-10c35.9%200%2065-29.1%2065-65s-29.1-65-65-65-65%2029.1-65%2065%2029.1%2065%2065%2065zm0-4.167c33.597%200%2060.833-27.236%2060.833-60.833%200-33.597-27.236-60.833-60.833-60.833-33.597%200-60.833%2027.236-60.833%2060.833%200%2033.597%2027.236%2060.833%2060.833%2060.833zm0-18.333c23.472%200%2042.5-19.028%2042.5-42.5S113.472%2047.5%2090%2047.5%2047.5%2066.528%2047.5%2090s19.028%2042.5%2042.5%2042.5z'%20id%3D'a'%2F%3E%3C%2Fdefs%3E%3Cg%20fill%3D'none'%20fill-rule%3D'evenodd'%3E%3Ccircle%20fill%3D'%23FFF'%20cx%3D'90'%20cy%3D'90'%20r%3D'90'%2F%3E%3Cmask%20id%3D'b'%20fill%3D'%23fff'%3E%3Cuse%20xlink%3Ahref%3D'%23a'%2F%3E%3C%2Fmask%3E%3Cuse%20fill%3D'%23A212D1'%20xlink%3Ahref%3D'%23a'%2F%3E%3Cpath%20d%3D'M0%200h180v180H0z'%20mask%3D'url(%23b)'%20fill%3D'%23A212D1'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E" sizes="any" type="image/svg+xml"><link rel="mask-icon" href="/mask-icon.svg" color="#a212d1"> <link rel="manifest" href="/manifest.json"> <style>:root{--fontstack-prefix:-apple-system,BlinkMacSystemFont,;--fontstack-sans-serif:"Helvetica Neue","Segoe UI",sans-serif;--fontstack-serif:Georgia,serif;--fontstack-monospace:Menlo,Consolas,monospace;--fontstack-default:var(--fontstack-prefix) var(--fontstack-sans-serif);--font-size-base:1rem;--font-size-factor:1vw;--font-size:1.6vw;--font-features:"halt","ss01","ss02";--line-height:calc(20 / 14);--heading-letter-spacing:-.04em;--breakpoint-lg:1600px;--breakpoint-md:1080px;--breakpoint-sm:640px;--breakpoint-xs:400px;--space-lg:24vw;--space-md:8vw;--space-sm:4vw;--space-xs:1.2vw;--border-lg:4px;--border-md:2px;--border-sm:1px;--nav-padding:.75vmax;--nav-item-space:1.4vmax;--text-color-h:318;--text-color-s:30%;--text-color-l:10%;--text-color-hsl:var(--text-color-h),var(--text-color-s),var(--text-color-l);--text-color:hsl(var(--text-color-hsl));--text-color-0:hsla(var(--text-color-hsl), 0);--text-color-3:hsla(var(--text-color-hsl), .03);--text-color-5:hsla(var(--text-color-hsl), .05);--text-color-7:hsla(var(--text-color-hsl), .07);--text-color-10:hsla(var(--text-color-hsl), .1);--text-color-20:hsla(var(--text-color-hsl), .2);--text-color-30:hsla(var(--text-color-hsl), .3);--text-color-40:hsla(var(--text-color-hsl), .4);--text-color-50:hsla(var(--text-color-hsl), .5);--text-color-60:hsla(var(--text-color-hsl), .6);--text-color-70:hsla(var(--text-color-hsl), .7);--text-color-80:hsla(var(--text-color-hsl), .8);--text-color-90:hsla(var(--text-color-hsl), .9);--text-color-light:hsl(var(--text-color-h), var(--text-color-s), calc(var(--text-color-l) / .9));--text-color-dark:hsl(var(--text-color-h), var(--text-color-s), calc(var(--text-color-l) * .9));--link-color-h:318;--link-color-s:100%;--link-color-l:50%;--link-color-hsl:var(--link-color-h),var(--link-color-s),var(--link-color-l);--link-color:hsl(var(--link-color-hsl));--link-color-0:hsla(var(--link-color-hsl), 0);--link-color-3:hsla(var(--link-color-hsl), .03);--link-color-5:hsla(var(--link-color-hsl), .05);--link-color-7:hsla(var(--link-color-hsl), .07);--link-color-10:hsla(var(--link-color-hsl), .1);--link-color-20:hsla(var(--link-color-hsl), .2);--link-color-30:hsla(var(--link-color-hsl), .3);--link-color-40:hsla(var(--link-color-hsl), .4);--link-color-50:hsla(var(--link-color-hsl), .5);--link-color-60:hsla(var(--link-color-hsl), .6);--link-color-70:hsla(var(--link-color-hsl), .7);--link-color-80:hsla(var(--link-color-hsl), .8);--link-color-90:hsla(var(--link-color-hsl), .9);--link-color-light:hsl(var(--link-color-h), var(--link-color-s), calc(var(--link-color-l) / .9));--link-color-dark:hsl(var(--link-color-h), var(--link-color-s), calc(var(--link-color-l) * .9));--bg-color-h:318;--bg-color-s:30%;--bg-color-l:100%;--bg-color-hsl:var(--bg-color-h),var(--bg-color-s),var(--bg-color-l);--bg-color:hsl(var(--bg-color-hsl));--bg-color-0:hsla(var(--bg-color-hsl), 0);--bg-color-3:hsla(var(--bg-color-hsl), .03);--bg-color-5:hsla(var(--bg-color-hsl), .05);--bg-color-7:hsla(var(--bg-color-hsl), .07);--bg-color-10:hsla(var(--bg-color-hsl), .1);--bg-color-20:hsla(var(--bg-color-hsl), .2);--bg-color-30:hsla(var(--bg-color-hsl), .3);--bg-color-40:hsla(var(--bg-color-hsl), .4);--bg-color-50:hsla(var(--bg-color-hsl), .5);--bg-color-60:hsla(var(--bg-color-hsl), .6);--bg-color-70:hsla(var(--bg-color-hsl), .7);--bg-color-80:hsla(var(--bg-color-hsl), .8);--bg-color-90:hsla(var(--bg-color-hsl), .9);--bg-color-light:hsl(var(--bg-color-h), var(--bg-color-s), calc(var(--bg-color-l) / .9));--bg-color-dark:hsl(var(--bg-color-h), var(--bg-color-s), calc(var(--bg-color-l) * .9));--code-color-h:calc(var(--link-color-h) + 30);--code-color-s:calc(var(--link-color-s) * .2 + 30%);--code-color-l:var(--link-color-l);--code-color-hsl:var(--code-color-h),var(--code-color-s),var(--code-color-l);--code-color:hsl(var(--code-color-hsl));--code-color-0:hsla(var(--code-color-hsl), 0);--code-color-3:hsla(var(--code-color-hsl), .03);--code-color-5:hsla(var(--code-color-hsl), .05);--code-color-7:hsla(var(--code-color-hsl), .07);--code-color-10:hsla(var(--code-color-hsl), .1);--code-color-20:hsla(var(--code-color-hsl), .2);--code-color-30:hsla(var(--code-color-hsl), .3);--code-color-40:hsla(var(--code-color-hsl), .4);--code-color-50:hsla(var(--code-color-hsl), .5);--code-color-60:hsla(var(--code-color-hsl), .6);--code-color-70:hsla(var(--code-color-hsl), .7);--code-color-80:hsla(var(--code-color-hsl), .8);--code-color-90:hsla(var(--code-color-hsl), .9);--code-color-light:hsl(var(--code-color-h), var(--code-color-s), calc(var(--code-color-l) / .9));--code-color-dark:hsl(var(--code-color-h), var(--code-color-s), calc(var(--code-color-l) * .9))}*,::after,::before{padding:0;margin:0;box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none;text-rendering:optimizelegibility;image-rendering:optimizequality;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:var(--bg-color)}body{--space-body:var(--space-lg);padding-top:0;padding-bottom:0;padding-left:var(--space-body);padding-right:var(--space-body);margin:0 auto 0;font-family:var(--fontstack-default);font-size:var(--font-size);-webkit-font-feature-settings:var(--font-features);font-feature-settings:var(--font-features);line-height:var(--line-height);hanging-punctuation:first allow-end;color:var(--text-color);background:var(--bg-color);-webkit-transition:all .2s ease;transition:all .2s ease}@media (max-width:1080px){body{--space-body:var(--space-md);font-size:calc(var(--font-size) * 1.4)}}@media (max-width:640px){body{--space-body:var(--space-sm);font-size:calc(var(--font-size) * 2.4)}}@media (max-width:400px){body{font-size:calc(var(--font-size) * 3.2)}}a{color:var(--text-color);text-decoration:none;-webkit-transition:color .5s ease,border-color .5s ease,background .5s ease,opacity 1.5s ease;transition:color .5s ease,border-color .5s ease,background .5s ease,opacity 1.5s ease}a:focus,a:hover{-webkit-transition:color .1s ease,border-color .1s ease,background .1s ease,opacity .1s ease;transition:color .1s ease,border-color .1s ease,background .1s ease,opacity .1s ease;text-decoration:underline}::-webkit-input-placeholder{color:var(--text-color);opacity:.2}::-moz-placeholder{color:var(--text-color);opacity:.2}:-ms-input-placeholder{color:var(--text-color);opacity:.2}::-ms-input-placeholder{color:var(--text-color);opacity:.2}:focus::-webkit-input-placeholder{color:var(--link-color)}:focus::-moz-placeholder{color:var(--link-color)}:focus:-ms-input-placeholder{color:var(--link-color)}:focus::-ms-input-placeholder{color:var(--link-color)}.navigation{padding-top:var(--nav-padding);padding-bottom:var(--nav-padding);margin-right:calc(var(--nav-item-space) * -1);margin-left:calc(var(--nav-item-space) * -1);font-size:90%;font-weight:700}.navigation li{display:inline-block;line-height:2}.navigation li a{padding:.5em var(--nav-item-space)}.navigation li a:focus,.navigation li a:hover{color:var(--link-color);text-decoration:none}.content{margin-bottom:16vmin}.content::after,.content::before{display:table;content:""}.content::after{clear:both}.content article>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child>:last-child>:last-child{margin-bottom:0!important}.content .post-content>:first-child{margin-top:0}.content a{font-weight:700}.content a:has(>code){-webkit-text-decoration-color:var(--code-color);text-decoration-color:var(--code-color)}.content p{margin-bottom:1.6rem;line-height:calc(var(--line-height) * 1.2)}.content header{--header-height:100vh;--space-header:var(--space-lg);display:-webkit-box;display:flex;min-height:calc(var(--header-height) - (var(--nav-padding) * 4) - (var(--nav-item-space) * 4) - (1ex * .9 * 2));padding-top:10vmin;padding-bottom:10vmin;margin-bottom:16vmin;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;background:var(--text-color-3);padding-left:var(--space-header);padding-right:var(--space-header);margin-left:calc(var(--space-header) * -1);margin-right:calc(var(--space-header) * -1)}@media (max-width:1080px){.content header{--header-height:70vh;--space-header:var(--space-md);padding-top:16vmin;padding-bottom:16vmin}}@media (max-width:640px){.content header{--space-header:var(--space-sm)}}.content header h1{font-size:360%;font-weight:700;letter-spacing:var(--heading-letter-spacing);margin-left:-2px;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.1}@media (max-width:640px){.content header h1{font-size:280%}}.content header small{display:block;margin-top:2vmin}.content h2{margin:10vmin 0 1rem;font-size:72%;font-weight:400;opacity:.5}.content ul{margin-bottom:1.8rem;list-style:none;counter-reset:list}@media (max-width:640px){.content ul{margin-left:1em}}.content ul li{line-height:calc(var(--line-height) * 1.2)}.content ul li::before{position:absolute;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;width:4em;margin-top:0;margin-left:-4em;text-align:right;opacity:.4;pointer-events:none}.content ul li::before{content:"-";padding-right:.5em}.content code,.content pre{font-family:var(--fontstack-monospace);color:var(--code-color)}.content pre{background:var(--code-color-5)}.content code{font-size:92%;overflow-wrap:break-word}.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{--space-code:var(--space-xs);padding-top:var(--space-xs);padding-bottom:var(--space-xs);padding-left:var(--space-code);padding-right:var(--space-code);margin-left:calc(var(--space-code) * -1);margin-right:calc(var(--space-code) * -1);margin-bottom:1.8rem;overflow-x:auto;font-size:80%;line-height:calc(var(--line-height) * 1.2);-webkit-overflow-scrolling:touch}@media (max-width:1080px){.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{--space-code:var(--space-md)}}@media (max-width:640px){.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{--space-code:var(--space-sm)}}.content .highlight>pre code,.content .highlighter-rouge pre.highlight code,.content pre code{overflow-wrap:normal}.post-modified-date{font-size:75%;opacity:.5}.footer{padding:0 0 16vmin;margin-right:calc(var(--nav-item-space) * -1);margin-left:calc(var(--nav-item-space) * -1);font-size:80%;text-transform:lowercase}.footer ul li{display:inline-block;line-height:1.8}.footer ul li a{padding:.5em var(--nav-item-space)}@media print{*,::after,::before{background:0 0!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}body{padding:10mm!important;margin:0!important;font-size:calc(var(--font-size) * 1.35)}a,a:visited{text-decoration:none}.content header{min-height:0;padding-bottom:0}.content .post-content{max-width:100%!important}.content .post-content a[href]::after{content:" (" attr(href) ")";font-weight:400;opacity:.5}pre{page-break-inside:avoid}h2,p{orphans:3;widows:3}h2{page-break-after:avoid}.footer,.navigation{display:none}}:root{--rdmz-h:var(--code-color-h, 254);--rdmz-s:var(--code-color-s, 80%);--rdmz-l:var(--code-color-l, 39%)}.highlight>pre,.highlighter-rouge pre.highlight{background:hsla(var(--rdmz-h),var(--rdmz-s),var(--rdmz-l),.03)}.highlight .err,.highlighter-rouge .err{background-color:hsla(var(--rdmz-h),calc(var(--rdmz-s) * 2),var(--rdmz-l),.1)}.highlight .c,.highlighter-rouge .c{font-style:italic}.highlight .k,.highlighter-rouge .k{font-weight:700}.highlight code,.highlight pre,.highlighter-rouge code,.highlighter-rouge pre{--rdmz-h-local:var(--rdmz-h);color:hsl(var(--rdmz-h),var(--rdmz-s),var(--rdmz-l))}.highlight .err,.highlighter-rouge .err{--rdmz-h-local:calc(var(--rdmz-h) + 5.3731343284);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .n,.highlighter-rouge .n{--rdmz-h-local:calc(var(--rdmz-h) + 16.1194029851);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .nd,.highlighter-rouge .nd{--rdmz-h-local:calc(var(--rdmz-h) + 48.3582089552);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .gd,.highlighter-rouge .gd{--rdmz-h-local:calc(var(--rdmz-h) + 118.208955224);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .gi,.highlighter-rouge .gi{--rdmz-h-local:calc(var(--rdmz-h) + 139.701492537);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .k,.highlighter-rouge .k{--rdmz-h-local:calc(var(--rdmz-h) + 177.313432836);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .m,.highlighter-rouge .m{--rdmz-h-local:calc(var(--rdmz-h) + 300.895522388);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .p,.highlighter-rouge .p{--rdmz-h-local:calc(var(--rdmz-h) + 354.626865672);color:hsl(var(--rdmz-h-local),var(--rdmz-s),var(--rdmz-l))}.highlight .gd,.highlighter-rouge .gd{--rdmz-h-local:10}.highlight .gi,.highlighter-rouge .gi{--rdmz-h-local:150}.highlight .c,.highlighter-rouge .c{color:hsla(calc(var(--rdmz-h) + 5.3731343284),calc(var(--rdmz-s) * .7),var(--rdmz-l),.6)}:root{--fontstack-sans-serif:"Helvetica Neue","Segoe UI","Hiragino Sans GB",sans-serif;--fontstack-serif:Georgia,"Hiragino Mincho ProN",serif}:root{--link-color-h:285;--link-color-s:84%;--link-color-l:45%;--text-color-h:var(--link-color-h);--bg-color-h:var(--link-color-h)}@media (prefers-color-scheme:dark){:root{--text-color-l:85%;--link-color-l:68%;--bg-color-h:230;--bg-color-l:12%;--bg-color-s:12%;--code-color-l:calc(var(--link-color-l) * 1)}}</style> <link rel="canonical" href="https://digitalauthority.com.au//note/css-variables-guide/"> <meta property="og:type" content="article"> <meta property="og:site_name" content="digital authority"> <meta property="og:title" content="CSS Variables Guide: Color Manipulation and Dark Mode"> <meta property="og:url" content="https://digitalauthority.com.au//note/css-variables-guide/"> <meta property="og:description" content="Follow this guide, you will: Learn why use HSLa over HEX/RGB for better color manipulation Create dark mode for your app/website with CSS variables (custom properties) in a pleasant way How to migrate from spreading colors all over your stylesheets..."> <meta property="og:image" content="https://digitalauthority.com.au//logo.png"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@ynnmedianetwork"> <meta name="twitter:creator" content="@youthsnews"> <meta property="article:published_time" content="2019-10-14T00:00:00+08:00"> <meta property="article:modified_time" content="2019-10-15T11:54:40+08:00"> <meta name="twitter:label1" value="Words"> <meta name="twitter:data1" value="1441 words"> <meta name="twitter:label2" value="Reading time"> <meta name="twitter:data2" value="7 mins"> </head><body><nav class="navigation"> <ul> <li> <a href="/">digital authority</a> </li> <li> <a href="/work/">Work</a> </li> <li> <a href="/note/">Consultant</a> </li> <li> <a href="/about/">About</a> </li> </ul> </nav> <main class="content" role="main"> <article lang="en"> <header> <h1 title="CSS Variables Guide: Color Manipulation and Dark Mode" data-title="CSS Variables Guide: Color Manipulation and Dark Mode"> CSS Variables Guide: Color Manipulation and Dark Mode<span class="dot dot--post"> </span> </h1> <small> By <span rel="author">digital</span> on <time datetime="2019-10-14T00:00:00+08:00">Oct 14, 2019</time> </small> </header> <div class="post-content"> <p>Follow this guide, you will:</p> <ul> <li>Learn why use HSLa over HEX/RGB for better color manipulation</li> <li>Create dark mode for your app/website with CSS variables (custom properties) in a pleasant way</li> <li>How to migrate from spreading colors all over your stylesheets to a unified, reactive color system</li> <li>Easily extend your theme to “darker” mode, “pinky” mode, or any color tint you want</li> </ul> <h2 id="lets-embrace-hsla-color-model">Let’s embrace HSLa color model</h2> <p>First, before I get started to create dark mode for my site, I deprecated all HEX and RGBa (ARGB) models with <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSLa</a>. Why? The real appeal of the HSLa model is it’s more intuitive, straightforward for humans to know what the color will be like when you change the H (hue), S (saturation), and L (lightness) values. Remember HEX or RGB colors? Will you tell <code class="highlighter-rouge">#6495ed</code> is cornflower blue? <code class="highlighter-rouge">rgb(75, 0, 130)</code> represents indigo? Are they light or dark colors? Their saturation? No, but HSLa will.</p> <h2 id="introducing-root-variables">Introducing Root Variables</h2> <p>Based on the HSLa model, I created a minimal, future-proof <a href="https://caniuse.com/#feat=css-variables">CSS variables</a> framework based on HSLa. <a href="https://sparanoid.com/lab/root-variables/">Root Variables</a>; it is:</p> <ul> <li>Minimal variables defined: colors, typography, and layout helpers.</li> <li>HSL colors: all colors are HSL-based for more straightforward manipulation (before we have CSS Color Module Level 4 in hands).</li> <li>Flexible to extend: all variables can be overridden later in <code class="highlighter-rouge">:root</code> or in specific scopes.</li> <li>Dark mode ready: extend your existing app with <code class="highlighter-rouge">prefers-color-scheme: dark</code>, tweak colors with HSL, and you’re ready to go.</li> </ul> <p>This framework starts with 4 main color templates cover most of the color using on a page:</p> <ul> <li><code class="highlighter-rouge">--text-color</code> for the main text. A generally dark color on a white page when the color scheme is light</li> <li><code class="highlighter-rouge">--link-color</code> for hyperlinks. A vivid color compared to general text</li> <li><code class="highlighter-rouge">--bg-color</code> for the page background. A white color by default</li> <li><code class="highlighter-rouge">--code-color</code> for monospace code text. Just an alternative color with slightly adjusted hue compared to link color</li> </ul> <p>If you look at the source code you will know how it works. Take the link color as an example:</p> <p>I first define the color using HSL color space in native CSS custom properties (aka. CSS variables). This can help me change the value of it or manipulate it using CSS <code class="highlighter-rouge">calc()</code> function later:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--link-color-h</span><span class="p">:</span> <span class="m">211</span><span class="p">;</span>
  <span class="py">--link-color-s</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="py">--link-color-l</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Since I have all the values HSL needs I can combine them into one variable:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--link-color-hsl</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-h</span><span class="p">),</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-s</span><span class="p">),</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-l</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>Then I can create more variables based on this HSL variable:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--link-color</span><span class="p">:</span> <span class="n">hsl</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">));</span>
  <span class="py">--link-color-5</span><span class="p">:</span> <span class="n">hsla</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">),</span> <span class="m">.05</span><span class="p">);</span>
  <span class="py">--link-color-10</span><span class="p">:</span> <span class="n">hsla</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">),</span> <span class="m">.1</span><span class="p">);</span>
  <span class="py">--link-color-20</span><span class="p">:</span> <span class="n">hsla</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">),</span> <span class="m">.2</span><span class="p">);</span>
  <span class="py">--link-color-50</span><span class="p">:</span> <span class="n">hsla</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">),</span> <span class="m">.5</span><span class="p">);</span>
  <span class="py">--link-color-90</span><span class="p">:</span> <span class="n">hsla</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-hsl</span><span class="p">),</span> <span class="m">.9</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>You get it? this creates “variable chains” — when <code class="highlighter-rouge">--link-color-h</code> updates; it will also updates <code class="highlighter-rouge">--link-color-hsl</code>. All colors based on these variables will also be updated automatically. It works more like traditional CSS preprocessors like Less and Sass, but it’s executed in the browser without compiling thanks to CSS variables.</p> <p>With this technique you can create more complex color variables with your imagination:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--link-color-light</span><span class="p">:</span> <span class="n">hsl</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-h</span><span class="p">),</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-s</span><span class="p">),</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-l</span><span class="p">)</span> <span class="p">/</span> <span class="m">.9</span><span class="p">));</span>
  <span class="py">--link-color-dark</span><span class="p">:</span> <span class="n">hsl</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-h</span><span class="p">),</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-s</span><span class="p">),</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-l</span><span class="p">)</span> <span class="err">*</span> <span class="m">.9</span><span class="p">));</span>
  <span class="c">/* just inverted from link-color's hue */</span>
  <span class="py">--code-color-h</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="n">var</span><span class="p">(</span><span class="n">--link-color-h</span><span class="p">)</span> <span class="err">+</span> <span class="m">180</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="create-your-own-themes">Create your own themes</h2> <p>The Root Variables framework is just too easy to use. You can just import it in your app and play around with the colors in your browser inspector to see how it works. If you like you can also create your own root variables based on this technique.</p> <p>To make things simple, I’ll continue with the Root Variables conventions for the dark mode guide.</p> <p>After importing the Root Variables you will get several CSS variables in your <code class="highlighter-rouge">:root</code>. You can override them later in any CSS files, and the best practice is defining them in <code class="highlighter-rouge">:root</code> or <code class="highlighter-rouge">body</code>:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* app.css */</span>
<span class="c">/* Override default color scheme */</span>
<span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--text-color-l</span><span class="p">:</span> <span class="m">20%</span><span class="p">;</span>
  <span class="py">--link-color-h</span><span class="p">:</span> <span class="m">240</span><span class="p">;</span>
  <span class="py">--bg-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
  <span class="py">--bg-color-l</span><span class="p">:</span> <span class="m">80%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>With the benefits of HSL color mode I can easily tweak the colors without using any visual color picker. I can open the browser inspector and change them to see color updates automatically.</p> <p>That’s all, I just created a new theme with lighter text, more bluish links, and a blush background.</p> <h2 id="welcome-to-the-variables-world">Welcome to the variables world!</h2> <p>Now preparing for the dark mode. You need to migrate all colors in your CSS with varibles you defined:</p> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">a {
</span><span class="gd">- color: #6495ed;
</span><span class="gi">+ color: var(--link-color);
</span><span class="err">}</span>

<span class="p">a:hover {
</span><span class="gd">- color: #6495ed;
</span><span class="gi">+ color: var(--link-color-dark);
</span><span class="err">}</span>

<span class="p">hr {
</span><span class="gd">- border-top-color: #e3e1ea;
</span><span class="gi">+ border-top-color: var(--text-color-10);
</span><span class="err">}</span>
</code></pre></div></div> <p>You can also create variables based on usage for more semantic:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--border</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--text-color-10</span><span class="p">);</span>
  <span class="py">--btn-hover</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--link-color-dark</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>This can be hard at the beginning, but when you’ve done this step you’re really close to the dark mode.</p> <h2 id="let-the-magic-happen">Let the magic happen</h2> <p>This is the final step for dark mode. Now you’re smart enough to realize that dark mode is just another theme for specific devices that support it. You already know how to create a theme based on Root Variables, then you know how to create another theme for dark mode:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* Dark mode, that's all we need. */</span>
<span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--text-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
  <span class="py">--text-color-l</span><span class="p">:</span> <span class="m">70%</span><span class="p">;</span>
  <span class="py">--link-color-l</span><span class="p">:</span> <span class="m">70%</span><span class="p">;</span>
  <span class="py">--bg-color-l</span><span class="p">:</span> <span class="m">7%</span><span class="p">;</span>
  <span class="py">--bg-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Let me explain:</p> <ul> <li>Set text color’s saturation lower to 10% that will be pleasant for your eyes.</li> <li>I’m creating a “white text with black background” style so make text color lighter to 70% lightness.</li> <li>The lightness of links could also match the text color. Set it to 70%, too.</li> <li>Turn off the light for the background color, so make the lightness of it to 7%.</li> <li>The background shouldn’t be too vivid, so set the saturation to 10%.</li> </ul> <p>You can copy and paste the above snippet to Root Variables demo to see how it works.</p> <p>Now, let’s make magic happen: wrap them in <code class="highlighter-rouge">prefers-color-scheme: dark</code> media query, followed by your original variable overrides:</p> <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* app.css */</span>
<span class="c">/* Override default color scheme */</span>
<span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--text-color-l</span><span class="p">:</span> <span class="m">20%</span><span class="p">;</span>
  <span class="py">--link-color-h</span><span class="p">:</span> <span class="m">240</span><span class="p">;</span>
  <span class="py">--bg-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
  <span class="py">--bg-color-l</span><span class="p">:</span> <span class="m">80%</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@media</span> <span class="p">(</span><span class="n">prefers-color-scheme</span><span class="p">:</span> <span class="n">dark</span><span class="p">)</span> <span class="p">{</span>
  <span class="nd">:root</span> <span class="p">{</span>
    <span class="py">--text-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
    <span class="py">--text-color-l</span><span class="p">:</span> <span class="m">70%</span><span class="p">;</span>
    <span class="py">--link-color-l</span><span class="p">:</span> <span class="m">70%</span><span class="p">;</span>
    <span class="py">--bg-color-l</span><span class="p">:</span> <span class="m">7%</span><span class="p">;</span>
    <span class="py">--bg-color-s</span><span class="p">:</span> <span class="m">10%</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>That’s all you need for dark mode! All your buttons, text, links, borders, input, modals, dropdowns, and etc. that you migrated from normal colors to variables will now update automatically when <code class="highlighter-rouge">prefers-color-scheme: dark</code> is true for supported devices.</p> <h2 id="further-reading">Further reading</h2> <ul> <li><a href="https://sparanoid.com/lab/root-variables/">Root Variables</a> - The initial project</li> <li><a href="https://sparanoid.com/lab/amsf/">Almace Scaffolding</a> - Dark mode demo</li> <li><a href="https://sparanoid.com/lab/opentype-features/">OpenType Features in CSS</a> - Custom AMSF dark mode demo</li> <li><a href="https://hyper.ai/">Hyper.AI</a> - 3 color schemes all with dark mode support. Related stylesheets for dark mode less than 50 lines.</li> </ul> <footer class="post-modified-date"> <p> Updated <time datetime=" 2019-10-15T11:54:40+08:00 "> Tuesday, Oct 15, 2019 </time> </p> </footer> </div> </article> </main> <footer class="footer"> <ul> <li><a href="/">digital authority</a></li> <li> <a href="https://sparanoid.com/lab/amsf/" title="Almace Scaffolding with theme Curtana">AMSF</a> </li> <li> <a href="https://marketin.com.au/">Marketin.com.au</a> </li> </ul> </footer> <script></script> <script></script> <script>"serviceWorker"in navigator&&"digitalauthority.com.au"===window.location.hostname&&navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})</script></body></html>